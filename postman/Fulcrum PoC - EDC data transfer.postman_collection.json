{
  "info": {
    "name": "Fulcrum PoC - EDC data transfer",
    "description": "",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Check all credentials (consumer)",
      "event": [],
      "request": {
        "method": "GET",
        "header": [],
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "key",
              "value": "X-Api-Key",
              "type": "string"
            },
            {
              "key": "value",
              "value": "c3VwZXItdXNlcg==.c3VwZXItc2VjcmV0LWtleQo=",
              "type": "string"
            }
          ]
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cs/api/identity/v1alpha/credentials",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cs",
            "api",
            "identity",
            "v1alpha",
            "credentials"
          ],
          "query": [],
          "variable": []
        }
      }
    },
    {
      "name": "Check all credentials (provider)",
      "event": [],
      "request": {
        "method": "GET",
        "header": [],
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "key",
              "value": "X-Api-Key",
              "type": "string"
            },
            {
              "key": "value",
              "value": "c3VwZXItdXNlcg==.c3VwZXItc2VjcmV0LWtleQo=",
              "type": "string"
            }
          ]
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cs/api/identity/v1alpha/credentials",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cs",
            "api",
            "identity",
            "v1alpha",
            "credentials"
          ],
          "query": [],
          "variable": []
        }
      }
    },
    {
      "name": "Download data from provider",
      "event": [],
      "request": {
        "method": "GET",
        "header": [],
        "auth": {
          "type": "apikey",
          "apikey": [
            {
              "key": "key",
              "value": "Authorization",
              "type": "string"
            },
            {
              "key": "value",
              "value": "{{AUTHORIZATION}}",
              "type": "string"
            }
          ]
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{PROVIDER}}/public/api/public",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{PROVIDER}}",
            "public",
            "api",
            "public"
          ],
          "query": [],
          "variable": []
        }
      }
    },
    {
      "name": "Get All Assets (just to check)",
      "event": [],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "disabled": false,
            "type": "default"
          }
        ],
        "auth": {
          "type": "noauth"
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cp/api/management/v3/assets/request",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cp",
            "api",
            "management",
            "v3",
            "assets",
            "request"
          ],
          "query": [],
          "variable": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n    \"@context\": {\n        \"@vocab\": \"https://w3id.org/edc/v0.0.1/ns/\"\n    },\n    \"@type\": \"QuerySpec\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      }
    },
    {
      "name": "Get Provider's Catalog",
      "event": [],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "disabled": false,
            "type": "default"
          }
        ],
        "auth": {
          "type": "noauth"
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cp/api/management/v3/catalog/request",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cp",
            "api",
            "management",
            "v3",
            "catalog",
            "request"
          ],
          "query": [],
          "variable": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n    \"@context\": [\n        \"https://w3id.org/edc/connector/management/v0.0.1\"\n    ],\n    \"@type\": \"CatalogRequest\",\n    \"counterPartyAddress\": \"http://controlplane.{{PROVIDER}}.svc.cluster.local:8082/api/dsp\",\n    \"counterPartyId\": \"{{PROVIDER_ID}}\",\n    \"protocol\": \"dataspace-protocol-http\",\n    \"querySpec\": {\n        \"offset\": 0,\n        \"limit\": 50\n    }\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      }
    },
    {
      "name": "Get all endpoint information",
      "event": [],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "disabled": false,
            "type": "default"
          }
        ],
        "auth": {
          "type": "noauth"
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cp/api/management/v3/edrs/request",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cp",
            "api",
            "management",
            "v3",
            "edrs",
            "request"
          ],
          "query": [],
          "variable": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n    \"@context\": [\n        \"https://w3id.org/edc/connector/management/v0.0.1\"\n    ],\n    \"@type\": \"QuerySpec\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      }
    },
    {
      "name": "Get endpoint information for transfer",
      "event": [],
      "request": {
        "method": "GET",
        "header": [],
        "auth": {
          "type": "noauth"
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cp/api/management/v3/edrs/{{TRANSFER_PROCESS_ID}}/dataaddress",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cp",
            "api",
            "management",
            "v3",
            "edrs",
            "{{TRANSFER_PROCESS_ID}}",
            "dataaddress"
          ],
          "query": [],
          "variable": []
        }
      }
    },
    {
      "name": "Initiate Contract Negotiation",
      "event": [],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "disabled": false,
            "type": "default"
          }
        ],
        "auth": {
          "type": "noauth"
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cp/api/management/v3/contractnegotiations",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cp",
            "api",
            "management",
            "v3",
            "contractnegotiations"
          ],
          "query": [],
          "variable": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n    \"@context\": [\n        \"https://w3id.org/edc/connector/management/v0.0.1\"\n    ],\n    \"@type\": \"ContractRequest\",\n    \"counterPartyAddress\": \"http://controlplane.{{PROVIDER}}.svc.cluster.local:8082/api/dsp\",\n    \"counterPartyId\": \"{{PROVIDER_ID}}\",\n    \"protocol\": \"dataspace-protocol-http\",\n    \"policy\": {\n        \"@type\": \"odrl:Offer\",\n        \"@id\": \"{{POLICY_ID_ASSET_1}}\",\n        \"assigner\": \"{{PROVIDER_ID}}\",\n        \"obligation\": [],\n        \"prohibition\": [],\n        \"permission\": {\n            \"action\": \"odrl:use\",\n            \"constraint\": {\n                \"leftOperand\": {\n                    \"@id\": \"MembershipCredential\"\n                },\n                \"operator\": {\n                    \"@id\": \"odrl:eq\"\n                },\n                \"rightOperand\": \"active\"\n            }\n        },\n        \"target\": \"asset-1\"\n    },\n    \"callbackAddresses\": []\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      }
    },
    {
      "name": "Obtain Credentials (consumer)",
      "event": [],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "disabled": false,
            "type": "default"
          },
          {
            "key": "X-Api-Key",
            "value": "c3VwZXItdXNlcg==.c3VwZXItc2VjcmV0LWtleQo=",
            "disabled": false,
            "type": "default"
          }
        ],
        "auth": {
          "type": "noauth"
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cs/api/identity/v1alpha/participants/{{CONSUMER_BASE64}}/credentials/request",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cs",
            "api",
            "identity",
            "v1alpha",
            "participants",
            "{{CONSUMER_BASE64}}",
            "credentials",
            "request"
          ],
          "query": [],
          "variable": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n    \"issuerDid\": \"did:web:dataspace-issuer-service.poc-issuer.svc.cluster.local%3A10016:issuer\",\n    \"holderPid\": \"credential-request-1\",\n    \"credentials\": [{\n        \"format\": \"VC1_0_JWT\",\n        \"type\": \"MembershipCredential\",\n        \"id\": \"membership-credential-def\"\n    },\n    {\n        \"format\": \"VC1_0_JWT\",\n        \"type\": \"DataProcessorCredential\",\n        \"id\": \"dataprocessor-credential-def\"\n    }]\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      }
    },
    {
      "name": "Obtain Credentials (provider)",
      "event": [],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "disabled": false,
            "type": "default"
          },
          {
            "key": "X-Api-Key",
            "value": "c3VwZXItdXNlcg==.c3VwZXItc2VjcmV0LWtleQo=",
            "disabled": false,
            "type": "default"
          }
        ],
        "auth": {
          "type": "noauth"
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{PROVIDER}}/cs/api/identity/v1alpha/participants/{{PROVIDER_BASE64}}/credentials/request",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{PROVIDER}}",
            "cs",
            "api",
            "identity",
            "v1alpha",
            "participants",
            "{{PROVIDER_BASE64}}",
            "credentials",
            "request"
          ],
          "query": [],
          "variable": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n    \"issuerDid\": \"did:web:dataspace-issuer-service.poc-issuer.svc.cluster.local%3A10016:issuer\",\n    \"holderPid\": \"credential-request-1\",\n    \"credentials\": [{\n        \"format\": \"VC1_0_JWT\",\n        \"type\": \"MembershipCredential\",\n        \"id\": \"membership-credential-def\"\n    },\n    {\n        \"format\": \"VC1_0_JWT\",\n        \"type\": \"DataProcessorCredential\",\n        \"id\": \"dataprocessor-credential-def\"\n    }]\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      }
    },
    {
      "name": "Poll Contract Negotiations",
      "event": [],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "disabled": false,
            "type": "default"
          }
        ],
        "auth": {
          "type": "noauth"
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cp/api/management/v3/contractnegotiations/request",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cp",
            "api",
            "management",
            "v3",
            "contractnegotiations",
            "request"
          ],
          "query": [],
          "variable": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n   \"@context\": [\n        \"https://w3id.org/edc/connector/management/v0.0.1\"\n    ],\n    \"@type\": \"QuerySpec\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      }
    },
    {
      "name": "Poll Transfer Requests",
      "event": [],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "disabled": false,
            "type": "default"
          },
          {
            "key": "X-Api-Key",
            "value": "password",
            "disabled": false,
            "type": "default"
          }
        ],
        "auth": {
          "type": "noauth"
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cp/api/management/v3/transferprocesses/request",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cp",
            "api",
            "management",
            "v3",
            "transferprocesses",
            "request"
          ],
          "query": [],
          "variable": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n    \"@context\": [\n        \"https://w3id.org/edc/connector/management/v0.0.1\"\n    ],\n    \"@type\": \"QuerySpec\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      }
    },
    {
      "name": "Start Transfer Process",
      "event": [],
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json",
            "disabled": false,
            "type": "default"
          }
        ],
        "auth": {
          "type": "noauth"
        },
        "description": "",
        "url": {
          "raw": "{{EDC_HOST}}/{{CONSUMER}}/cp/api/management/v3/transferprocesses",
          "protocol": "",
          "host": [
            "{{EDC_HOST}}"
          ],
          "path": [
            "{{CONSUMER}}",
            "cp",
            "api",
            "management",
            "v3",
            "transferprocesses"
          ],
          "query": [],
          "variable": []
        },
        "body": {
          "mode": "raw",
          "raw": "{\n    \"@context\": [\n        \"https://w3id.org/edc/connector/management/v0.0.1\"\n    ],\n    \"assetId\": \"asset-1\",\n    \"counterPartyAddress\":  \"http://controlplane.{{PROVIDER}}.svc.cluster.local:8082/api/dsp\",\n    \"connectorId\": \"{{PROVIDER_ID}}\",\n    \"contractId\": \"{{AGREEMENT_ID}}\",\n    \"dataDestination\": {\n        \"type\": \"HttpProxy\"\n    },\n    \"protocol\": \"dataspace-protocol-http\",\n    \"transferType\": \"HttpData-PULL\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        }
      }
    }
  ],
  "variable": [
    {
      "key": "EDC_HOST",
      "value": "",
      "type": "default"
    },
    {
      "key": "CONSUMER",
      "value": "",
      "type": "default"
    },
    {
      "key": "PROVIDER",
      "value": "",
      "type": "default"
    },
    {
      "key": "AUTHORIZATION",
      "value": "",
      "type": "default"
    },
    {
      "key": "PROVIDER_ID",
      "value": "",
      "type": "default"
    },
    {
      "key": "TRANSFER_PROCESS_ID",
      "value": "",
      "type": "default"
    },
    {
      "key": "POLICY_ID_ASSET_1",
      "value": "",
      "type": "default"
    },
    {
      "key": "CONSUMER_BASE64",
      "value": "",
      "type": "default"
    },
    {
      "key": "PROVIDER_BASE64",
      "value": "",
      "type": "default"
    },
    {
      "key": "AGREEMENT_ID",
      "value": "",
      "type": "default"
    }
  ]
}